<div class="tour-add" *ngIf="tour">
  <div class="tour-add__title__wrapper">
    <input class="tour-add__title h3" [(ngModel)]="tour.title" />
    <span class="edit-icon"></span>
  </div>

  <div class="tour-add__main">
    <div class="tour-add__media__container">
      <div class="tour-add__media" *ngIf="activeMedia">
        <img src="assets/img/tours/{{activeMedia}}" *ngIf="activeMediaType === 'photo'" />
        <!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise -->
        <!-- warning: playback does not work on iOS3 if you include the poster attribute! fixed in iOS4.0 -->
        <video #movieplayer width="100%" height="100%" controls *ngIf="activeMediaType === 'video'">
        	<!-- MP4 must be first for iPad! -->
        	<source src="assets/video/{{activeMedia}}.mp4" type="video/mp4" /><!-- Safari / iOS video    -->
        </video>
      </div>
      <div class="tour-add__media__list">
        <div class="tour-add__media__list__icon" *ngFor="let video of tour.video"
        (click)="activateMedia('video', video)"
        (touchend)="activateMedia('video', video)">
          <img src="assets/video/video-placeholder.png" />
        </div>
        <div class="tour-add__media__list__icon" *ngFor="let photo of tour.photo"
        (click)="activateMedia('photo', photo)"
        (touchend)="activateMedia('photo', photo)">
          <img src="assets/img/tours/{{photo}}" />
        </div>
        <div class="tour-add__media__list__icon tour-add__media__list__icon--add-photo"
        (click)="uploadPhoto()"
        (touchend)="uploadPhoto()">
          <span class="tour-add__media__list__icon--plus"></span>
          <span class="tour-add__media__list__icon--text">Добавить фото</span>
        </div>
        <div class="tour-add__media__list__icon tour-add__media__list__icon--add-video"
        (click)="uploadVideo()"
        (touchend)="uploadVideo()">
          <span class="tour-add__media__list__icon--plus"></span>
          <span class="tour-add__media__list__icon--text">Добавить видео</span>
        </div>
      </div>
      <div class="tour-add__secondary">
        <div class="tour-add__info">
          <!-- <div>operator: {{tour.operator}} - rating: {{tour.rating}}</div> -->
          <input class="tour-add__info__title h5" [(ngModel)]="tour.descriptionTitle" />
          <textarea [(ngModel)]="tour.description"></textarea>
          <span class="edit-icon"></span>
        </div>
        <div class="tour-add__important" *ngIf="tour.important">
          <h5 class="labels__title">Важные моменты</h5>
          <md-checkbox class="form-control checkbox checkbox--theme-readonly"
          *ngFor="let important of tour.important; let i = index"
          (click)="editLabels.important[i] = true; ">
            <span *ngIf="!editLabels.important[i]">{{important}}</span>
            <input type="text" [(ngModel)]="tour.important[i]"
            *ngIf="editLabels.important[i]"
            (blur)="editLabels.important[i] = false"/>
          </md-checkbox>
        </div>
        <div class="tour-add__included" *ngIf="tour.included">
          <h5 class="labels__title">В стоимость включено</h5>
          <md-checkbox class="form-control checkbox checkbox--theme-readonly" *ngFor="let included of tour.included">
            {{included}}
          </md-checkbox>
        </div>
        <div class="tour-add__not-included" *ngIf="tour.notIncluded">
          <h5 class="labels__title">В стоимость не включено</h5>
          <md-checkbox class="form-control checkbox checkbox--theme-readonly" *ngFor="let notIncluded of tour.notIncluded">
            {{notIncluded}}
          </md-checkbox>
        </div>
      </div>
    </div>
    <div class="fill-remaining-space"></div>
    <div class="tour-add__cta__wrapper">
      <div class="tour-add__cta__description">
        <div class="tour-add__cta__description__price">
          <div class="tour-add__cta__price__label">Стоимость</div>
          <div class="tour-add__cta__price"><input [(ngModel)]="tour.price" /> руб.</div>
          <span class="edit-icon"></span>
        </div>
        <div class="tour-add__cta__description__duration">
          <div class="tour-add__cta__description__label">Длительность</div>
          <span class="duration__icon duration__icon--theme-black"></span>
          <input [(ngModel)]="tour.duration" /> часов
          <span class="edit-icon"></span>
        </div>
        <div class="tour-add__cta__description__type" (click)="showOptions('movementType')">
          <div class="tour-add__cta__description__label">Тип</div>
          <div class="tour-add__cta__description__type__text">
            <span class="type__icon type__icon--theme-black" [ngClass]="setMovementTypeClass(tour.movementType)"></span>
            {{translateType(tour.movementType)}}
          </div>
          <span class="edit-dropdown"></span>
          <div class="tour-add__cta__description__type__options" *ngIf="optionsShown['movementType']">
            <div class="tour-add__cta__description__type__option" *ngFor="let option of options.movementType" (click)="selectOption('movementType', option, $event)">
              <span class="type__icon type__icon--theme-black" [ngClass]="setMovementTypeClass(option)"></span>
              {{translateType(option)}}
            </div>
          </div>
        </div>
        <div class="tour-add__cta__description__area">
          <div class="tour-add__cta__description__label">Вид</div>
          <input [(ngModel)]="tour.area" />
          <span class="edit-icon"></span>
        </div>
        <div class="tour-add__cta__description__meeting-place">
          <div class="tour-add__cta__description__label">Место встречи</div>
          <input [(ngModel)]="tour.meetingPlace" />
          <span class="edit-icon"></span>
        </div>
      </div>
    </div>
  </div>

</div>
